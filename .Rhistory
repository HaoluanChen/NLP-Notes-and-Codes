labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(10) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(5) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(3) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(2) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(10, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(20, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(15, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(15, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(10, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(10, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(15, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(12, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(20, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(14, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(14, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment %>% filter(word == "fall")
uw_sentiment %>% filter(word == "fall")
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_dark()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(14, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_solarized()
ut_sentiment <- ut_sentiment%>% filter(word == "fall")
uw_sentiment <- uw_sentiment%>% filter(word == "fall")
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_dark()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(14, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_solarized()
ut_sentiment <- ut_sentiment%>% filter(!word == "fall")
uw_sentiment <- uw_sentiment%>% filter(!word == "fall")
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_dark()
ut_sentiment <- ut_sentiment%>% filter(!word == "fall")
uw_sentiment <- uw_sentiment%>% filter(!word == "fall")
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_dark()
ut_sentiment
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment <- frequency %>%
inner_join(get_sentiments("bing"))
uw_sentiment <- frequency_uw %>%
inner_join(get_sentiments("bing"))
ut_sentiment
uw_sentiment
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(14, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip()
ut_sentiment <- ut_sentiment%>% filter(!word == "fall")
uw_sentiment <- uw_sentiment%>% filter(!word == "fall")
ut_sentiment %>%
group_by(sentiment) %>%
top_n(14, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_dark()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(14, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_solarized()
ut_sentiment <- ut_sentiment%>% filter(!word == "fall")
uw_sentiment <- uw_sentiment%>% filter(!word == "fall")
ut_sentiment %>%
group_by(sentiment) %>%
top_n(13, ut_n) %>%
ungroup() %>%
mutate(word = reorder(word, ut_n)) %>%
ggplot(aes(word, ut_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_dark()
uw_sentiment %>%
group_by(sentiment) %>%
top_n(13, uw_n) %>%
ungroup() %>%
mutate(word = reorder(word, uw_n)) %>%
ggplot(aes(word, uw_n, fill = sentiment)) +
geom_col(show.legend = FALSE) +
facet_wrap(~sentiment, scales = "free_y") +
labs(y = "Contribution to sentiment",
x = NULL) +
coord_flip() +
theme_solarized()
knitr::opts_chunk$set(echo = TRUE)
library(tm)
library(dplyr)
library(tidytext)
library(ggplot2)
library(ggthemes)
library(tidyr)
library(topicmodels)
library(rtweet)
library(mallet)
news_word
file.create(empty_file <- tempfile())
docs <- mallet.import(news_word$article, news_word$text, empty_file)
mallet_model <- MalletLDA(num.topics = 2)
mallet_model$loadDocuments(docs)
mallet_model$train(100)
# word-topic pairs
tidy(mallet_model)
# document-topic pairs
tidy(mallet_model, matrix = "gamma")
mallet_model <- MalletLDA(num.topics = 2)
mallet_model$loadDocuments(docs)
mallet_model$train(100)
library(mallet)
news_word
file.create(empty_file <- tempfile())
docs <- mallet.import(news_word$article, news_word$text, empty_file)
mallet_model <- MalletLDA(num.topics = 2)
mallet_model$loadDocuments(docs)
# mallet_model$train(100)
# word-topic pairs
tidy(mallet_model)
# document-topic pairs
tidy(mallet_model, matrix = "gamma")
stock_tokens <- stock_articles %>%
mutate(corpus = map(corpus, tidy)) %>%
unnest(cols = (corpus))
library(tm.plugin.webmining)
library(purrr)
company <- c("Microsoft", "Apple", "Google")
symbol <- c("MSFT", "AAPL", "GOOG")
download_articles <- function(symbol) {
WebCorpus(YahooNewsSource(symbol))
}
stock_articles <- tibble(company = company,symbol = symbol) %>%
mutate(corpus = map(symbol, download_articles))
stock_articles
stock_tokens <- stock_articles %>%
mutate(corpus = map(corpus, tidy)) %>%
unnest(cols = (corpus))
stock_tokens
